{"id":"netmon-0wq","title":"Add 1-5 key handlers for column sorting","description":"Add key handlers in internal/ui/update.go:\n\nOnly active when m.viewMode == ViewTable:\n\nCase '1': set/toggle SortProcess\nCase '2': set/toggle SortProtocol\nCase '3': set/toggle SortLocal\nCase '4': set/toggle SortRemote\nCase '5': set/toggle SortState\n\nLogic:\n- If sortColumn == pressed column: toggle sortAscending\n- Else: set sortColumn = pressed column, sortAscending = true","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:16.383937+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:16.383937+01:00","dependencies":[{"issue_id":"netmon-0wq","depends_on_id":"netmon-w58","type":"blocks","created_at":"2026-01-03T22:39:28.65854+01:00","created_by":"kostya"}]}
{"id":"netmon-17v","title":"Update View() to branch on viewMode","description":"Modify View() in internal/ui/view.go:\n\nIn the content section, branch based on m.viewMode:\n- ViewGrouped: call existing renderApplications()\n- ViewTable: call new renderTable()\n\nUpdate summary line in table view to include sort indicator:\n'Showing X connections (Y hidden) | Sorted by Process ▲'","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:15.658233+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:15.658233+01:00","dependencies":[{"issue_id":"netmon-17v","depends_on_id":"netmon-d8x","type":"blocks","created_at":"2026-01-03T22:39:28.441826+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw","title":"Network Monitor with gopsutil","description":"Replace placeholder table with real network monitor using gopsutil. Display connections grouped by application in collapsible tree view. macOS first with abstraction for future cross-platform support. See plan: /Users/kostya/personal/claudecode/plans/quizzical-pondering-reef.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-03T21:08:22.230455+01:00","created_by":"kostya","updated_at":"2026-01-03T21:16:14.531724+01:00","closed_at":"2026-01-03T21:16:14.531724+01:00","close_reason":"All tasks completed - network monitor with gopsutil implemented"}
{"id":"netmon-1gw.1","title":"Add gopsutil v3 dependency","description":"Add github.com/shirou/gopsutil/v3 to go.mod. Run: go get github.com/shirou/gopsutil/v3","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:08:40.301783+01:00","created_by":"kostya","updated_at":"2026-01-03T21:11:31.289382+01:00","closed_at":"2026-01-03T21:11:31.289382+01:00","close_reason":"Closed","labels":["data-layer","phase-1"],"dependencies":[{"issue_id":"netmon-1gw.1","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:08:40.3037+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw.10","title":"Test and polish on macOS","description":"Test with real network traffic. Verify: expand/collapse works, refresh rate adjustment, navigation, process exits handled gracefully, permission issues documented.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:09:13.662512+01:00","created_by":"kostya","updated_at":"2026-01-03T21:16:08.017374+01:00","closed_at":"2026-01-03T21:16:08.017374+01:00","close_reason":"Closed","labels":["phase-4","testing"],"dependencies":[{"issue_id":"netmon-1gw.10","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:09:13.664351+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.10","depends_on_id":"netmon-1gw.7","type":"blocks","created_at":"2026-01-03T21:09:39.602766+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.10","depends_on_id":"netmon-1gw.9","type":"blocks","created_at":"2026-01-03T21:09:39.751917+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw.2","title":"Create domain models (internal/model/network.go)","description":"Create data types: Connection (Protocol, LocalAddr, RemoteAddr, State), Application (Name, PIDs, Connections, Expanded), NetworkSnapshot (Applications, Timestamp). Add SortByConnectionCount method.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:08:40.478278+01:00","created_by":"kostya","updated_at":"2026-01-03T21:11:55.884363+01:00","closed_at":"2026-01-03T21:11:55.884363+01:00","close_reason":"Closed","labels":["data-layer","phase-1"],"dependencies":[{"issue_id":"netmon-1gw.2","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:08:40.478706+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw.3","title":"Create collector interface (internal/collector/collector.go)","description":"Define Collector interface with Collect(ctx) method. Add New() factory function that returns platform-specific implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:08:40.659547+01:00","created_by":"kostya","updated_at":"2026-01-03T21:12:22.13169+01:00","closed_at":"2026-01-03T21:12:22.13169+01:00","close_reason":"Closed","labels":["data-layer","phase-1"],"dependencies":[{"issue_id":"netmon-1gw.3","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:08:40.659947+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.3","depends_on_id":"netmon-1gw.2","type":"blocks","created_at":"2026-01-03T21:09:28.096704+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw.4","title":"Implement macOS collector (internal/collector/darwin.go)","description":"Use gopsutil net.Connections('all') and process.NewProcess() to collect network data. Cache process names. Group connections by app name. Handle PIDs, state, protocol. Use build tag //go:build darwin","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:08:40.847634+01:00","created_by":"kostya","updated_at":"2026-01-03T21:13:15.726324+01:00","closed_at":"2026-01-03T21:13:15.726324+01:00","close_reason":"Closed","labels":["data-layer","phase-1"],"dependencies":[{"issue_id":"netmon-1gw.4","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:08:40.848106+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.4","depends_on_id":"netmon-1gw.1","type":"blocks","created_at":"2026-01-03T21:09:28.237699+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.4","depends_on_id":"netmon-1gw.3","type":"blocks","created_at":"2026-01-03T21:09:28.382553+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw.5","title":"Create Bubble Tea messages (internal/ui/messages.go)","description":"Define TickMsg (time.Time) for refresh timer and DataMsg (Snapshot, Err) for data updates.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:08:56.439323+01:00","created_by":"kostya","updated_at":"2026-01-03T21:13:32.410301+01:00","closed_at":"2026-01-03T21:13:32.410301+01:00","close_reason":"Closed","labels":["phase-2","ui"],"dependencies":[{"issue_id":"netmon-1gw.5","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:08:56.441962+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.5","depends_on_id":"netmon-1gw.2","type":"blocks","created_at":"2026-01-03T21:09:28.522242+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw.6","title":"Update Model struct (internal/ui/model.go)","description":"Replace table with: snapshot *NetworkSnapshot, collector Collector, cursor int, refreshInterval time.Duration. Add constants for min/max/default intervals. Update NewModel() to init collector.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:08:56.61428+01:00","created_by":"kostya","updated_at":"2026-01-03T21:13:59.374595+01:00","closed_at":"2026-01-03T21:13:59.374595+01:00","close_reason":"Closed","labels":["phase-2","ui"],"dependencies":[{"issue_id":"netmon-1gw.6","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:08:56.614774+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.6","depends_on_id":"netmon-1gw.4","type":"blocks","created_at":"2026-01-03T21:09:28.668961+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.6","depends_on_id":"netmon-1gw.5","type":"blocks","created_at":"2026-01-03T21:09:28.817296+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw.7","title":"Implement Update handlers (internal/ui/update.go)","description":"Init(): start tick and fetch. Handle keys: ↑↓jk=navigate, ←→hl=collapse/expand, +=faster, -=slower, q=quit. Handle TickMsg (refresh), DataMsg (update snapshot, preserve expanded state).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:08:56.783121+01:00","created_by":"kostya","updated_at":"2026-01-03T21:14:31.157489+01:00","closed_at":"2026-01-03T21:14:31.157489+01:00","close_reason":"Closed","labels":["phase-2","ui"],"dependencies":[{"issue_id":"netmon-1gw.7","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:08:56.783573+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.7","depends_on_id":"netmon-1gw.6","type":"blocks","created_at":"2026-01-03T21:09:39.16683+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw.8","title":"Add tree view styles (internal/ui/styles.go)","description":"Add styles: AppStyle, SelectedAppStyle (with background), ConnStyle, SelectedConnStyle, StatusStyle, LoadingStyle, EmptyStyle. Keep existing HeaderStyle and FooterStyle.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:09:05.710686+01:00","created_by":"kostya","updated_at":"2026-01-03T21:14:55.928009+01:00","closed_at":"2026-01-03T21:14:55.928009+01:00","close_reason":"Closed","labels":["phase-3","ui"],"dependencies":[{"issue_id":"netmon-1gw.8","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:09:05.71273+01:00","created_by":"kostya"}]}
{"id":"netmon-1gw.9","title":"Implement tree view rendering (internal/ui/view.go)","description":"Remove table rendering. Add: header with refresh rate, renderApplications() with ▼/▶ icons, renderConnection() with protocol/addr/state columns, footer with keybind hints. Handle loading/empty states.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:09:05.887882+01:00","created_by":"kostya","updated_at":"2026-01-03T21:15:41.662892+01:00","closed_at":"2026-01-03T21:15:41.662892+01:00","close_reason":"Closed","labels":["phase-3","ui"],"dependencies":[{"issue_id":"netmon-1gw.9","depends_on_id":"netmon-1gw","type":"parent-child","created_at":"2026-01-03T21:09:05.888318+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.9","depends_on_id":"netmon-1gw.6","type":"blocks","created_at":"2026-01-03T21:09:39.313417+01:00","created_by":"kostya"},{"issue_id":"netmon-1gw.9","depends_on_id":"netmon-1gw.8","type":"blocks","created_at":"2026-01-03T21:09:39.459708+01:00","created_by":"kostya"}]}
{"id":"netmon-1v5","title":"Update footer based on view mode","description":"Modify footer rendering in View() in internal/ui/view.go:\n\nGrouped view footer:\n'↑↓/jk Navigate  ←→/hl Collapse/Expand  v: Table  +/- Refresh  q Quit'\n\nTable view footer:\n'↑↓/jk Navigate  1-5 Sort  v: Grouped  +/- Refresh  q Quit'\n\nDynamically build footer string based on m.viewMode.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:15.904246+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:15.904246+01:00","dependencies":[{"issue_id":"netmon-1v5","depends_on_id":"netmon-w58","type":"blocks","created_at":"2026-01-03T22:39:28.510879+01:00","created_by":"kostya"}]}
{"id":"netmon-3e1","title":"Implement flattenConnections helper","description":"Add helper function to internal/ui/view.go:\n\n```go\ntype FlatConnection struct {\n    ProcessName string\n    Connection  model.Connection\n}\n\nfunc (m Model) flattenConnections() []FlatConnection\n```\n\nIterate through m.snapshot.Applications and create a flat slice of all connections with their parent process name attached. This is the data source for table view rendering.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:14.678163+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:14.678163+01:00","dependencies":[{"issue_id":"netmon-3e1","depends_on_id":"netmon-w58","type":"blocks","created_at":"2026-01-03T22:39:27.952653+01:00","created_by":"kostya"}]}
{"id":"netmon-43p","title":"View switching: grouped vs table view","description":"Implement toggle between grouped-by-process view and flat table view with great UX.\n\n## Features\n- Press 'v' to toggle between Grouped ↔ Table views\n- Table view: flat connection list with columns (Process, Proto, Local, Remote, State)\n- Column headers with 1-5 keys to sort, press again to toggle direction\n- Sort indicator (▲/▼) on active column\n- Row-by-row navigation in table view\n- Separate cursors for each view (switching preserves position)\n- Full state persistence across data refreshes\n- Footer shows what 'v' does (action-oriented)\n\n## Design Decisions\n- No PID column (available in grouped view)\n- No sorting in grouped view\n- Cursor wraps/clamps same as grouped view","status":"in_progress","priority":2,"issue_type":"epic","created_at":"2026-01-03T22:36:19.994355+01:00","created_by":"kostya","updated_at":"2026-01-03T22:39:56.22349+01:00","dependencies":[{"issue_id":"netmon-43p","depends_on_id":"netmon-d9g","type":"blocks","created_at":"2026-01-03T22:40:51.167223+01:00","created_by":"kostya"},{"issue_id":"netmon-43p","depends_on_id":"netmon-vva","type":"blocks","created_at":"2026-01-03T22:40:51.232947+01:00","created_by":"kostya"},{"issue_id":"netmon-43p","depends_on_id":"netmon-17v","type":"blocks","created_at":"2026-01-03T22:40:51.302505+01:00","created_by":"kostya"},{"issue_id":"netmon-43p","depends_on_id":"netmon-1v5","type":"blocks","created_at":"2026-01-03T22:40:51.369903+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv","title":"Add scrollable viewport with fixed header/footer (k9s-style)","description":"Implement a scrollable content area using Bubble Tea's viewport component. Header and footer remain fixed while the application list scrolls. Cursor navigation (j/k) keeps selection visible.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-03T22:12:09.929454+01:00","created_by":"kostya","updated_at":"2026-01-03T22:24:20.738981+01:00","closed_at":"2026-01-03T22:24:20.738981+01:00","close_reason":"Viewport scrolling implemented with fixed header/footer"}
{"id":"netmon-6mv.1","title":"Add viewport.Model and ready flag to Model struct","description":"In internal/ui/model.go:\n\n1. Add import for 'github.com/charmbracelet/bubbles/viewport'\n2. Add 'viewport viewport.Model' field to Model struct\n3. Add 'ready bool' field to track viewport initialization state\n4. No initialization needed in NewModel() - viewport will be initialized on first WindowSizeMsg\n\nThis is the foundation for all other viewport work.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T22:13:00.623156+01:00","created_by":"kostya","updated_at":"2026-01-03T22:16:15.717562+01:00","closed_at":"2026-01-03T22:16:15.717562+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-6mv.1","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:00.625164+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv.10","title":"Manual testing: verify scroll behavior with many apps","description":"Manual verification checklist:\n\n1. Build and run: go build \u0026\u0026 ./netmon\n2. Verify header stays fixed at top\n3. Verify footer stays fixed at bottom\n4. Navigate down (j) past visible area - content should scroll, cursor stays visible\n5. Navigate up (k) past visible area - content should scroll up\n6. Expand several apps (l) - verify scroll adjusts for added content\n7. Collapse apps (h) - verify scroll adjusts\n8. Try Page Up / Page Down - should scroll by page\n9. Resize terminal window - viewport should resize properly\n10. With many connections, verify smooth scrolling\n\nDocument any issues found.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T22:13:02.629197+01:00","created_by":"kostya","updated_at":"2026-01-03T22:24:14.824073+01:00","closed_at":"2026-01-03T22:24:14.824073+01:00","close_reason":"Binary builds, all unit tests pass. Ready for user manual testing.","dependencies":[{"issue_id":"netmon-6mv.10","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:02.629559+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.10","depends_on_id":"netmon-6mv.9","type":"blocks","created_at":"2026-01-03T22:13:09.675979+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv.2","title":"Define header/footer height constants","description":"In internal/ui/view.go or a new constants section:\n\n1. Add const headerHeight = 4 (title line + status line + error line potential + blank line)\n2. Add const footerHeight = 2 (margin + controls line)\n3. These constants will be used to calculate viewport height as: terminalHeight - headerHeight - footerHeight\n\nHaving these as constants makes future header/footer changes easier.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T22:13:00.829708+01:00","created_by":"kostya","updated_at":"2026-01-03T22:16:15.718893+01:00","closed_at":"2026-01-03T22:16:15.718893+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-6mv.2","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:00.830201+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv.3","title":"Handle viewport initialization on WindowSizeMsg","description":"In internal/ui/update.go, modify the tea.WindowSizeMsg case:\n\n1. Calculate viewport height: msg.Height - headerHeight - footerHeight\n2. If not m.ready (first time):\n   - Create viewport: viewport.New(msg.Width, viewportHeight)\n   - Set m.ready = true\n3. If already ready (resize):\n   - Update viewport dimensions: m.viewport.Width = msg.Width\n   - m.viewport.Height = viewportHeight\n4. Continue storing m.width and m.height as before\n\nThis ensures viewport is properly sized on startup and window resize.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T22:13:01.02802+01:00","created_by":"kostya","updated_at":"2026-01-03T22:16:49.985409+01:00","closed_at":"2026-01-03T22:16:49.985409+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-6mv.3","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:01.028418+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.3","depends_on_id":"netmon-6mv.1","type":"blocks","created_at":"2026-01-03T22:13:08.908858+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.3","depends_on_id":"netmon-6mv.2","type":"blocks","created_at":"2026-01-03T22:13:08.994471+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv.4","title":"Add helper function to calculate cursor line position","description":"In internal/ui/view.go, add a new function:\n\nfunc (m Model) cursorLinePosition() int\n\nThis function calculates which line number the currently selected app is on:\n1. Initialize lineNumber = 0\n2. Loop through apps from 0 to m.cursor-1:\n   - Add 1 for each app header line\n   - If app is expanded, add len(connections) for connection lines\n3. Return lineNumber\n\nThis is needed to scroll the viewport to keep cursor visible when navigating.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T22:13:01.239634+01:00","created_by":"kostya","updated_at":"2026-01-03T22:16:49.986903+01:00","closed_at":"2026-01-03T22:16:49.986903+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-6mv.4","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:01.240116+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.4","depends_on_id":"netmon-6mv.1","type":"blocks","created_at":"2026-01-03T22:13:09.087483+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv.5","title":"Sync viewport scroll position on cursor movement","description":"In internal/ui/update.go, after cursor changes (up/down/j/k keys):\n\n1. Call cursorLinePosition() to get the line number of selected app\n2. Check if line is above visible area: if lineNumber \u003c m.viewport.YOffset\n   - Set m.viewport.SetYOffset(lineNumber)\n3. Check if line is below visible area: if lineNumber \u003e= m.viewport.YOffset + m.viewport.Height\n   - Set m.viewport.SetYOffset(lineNumber - m.viewport.Height + 1)\n\nAlso sync after expand/collapse (left/right/h/l) since content height changes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T22:13:01.467954+01:00","created_by":"kostya","updated_at":"2026-01-03T22:17:51.123413+01:00","closed_at":"2026-01-03T22:17:51.123413+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-6mv.5","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:01.468342+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.5","depends_on_id":"netmon-6mv.3","type":"blocks","created_at":"2026-01-03T22:13:09.156183+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.5","depends_on_id":"netmon-6mv.4","type":"blocks","created_at":"2026-01-03T22:13:09.22393+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv.6","title":"Pass unhandled keys to viewport for scroll handling","description":"In internal/ui/update.go, in the tea.KeyMsg case:\n\n1. After handling our specific keys (q, j, k, h, l, +, -), add a default case\n2. In default case: pass the key message to viewport\n   - var cmd tea.Cmd\n   - m.viewport, cmd = m.viewport.Update(msg)\n   - return m, cmd\n3. This enables viewport's built-in handling of:\n   - Page Up / Page Down\n   - Home / End\n   - Mouse wheel scrolling (if enabled)\n\nOur keys take priority, viewport handles the rest.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T22:13:01.70714+01:00","created_by":"kostya","updated_at":"2026-01-03T22:18:42.286551+01:00","closed_at":"2026-01-03T22:18:42.286551+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-6mv.6","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:01.70751+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.6","depends_on_id":"netmon-6mv.3","type":"blocks","created_at":"2026-01-03T22:13:09.291814+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv.7","title":"Restructure View() to use viewport for content","description":"In internal/ui/view.go, restructure the View() function:\n\n1. Render header section separately (title, status, error) - same as before\n2. Generate content string from renderApplications()\n3. Set viewport content: m.viewport.SetContent(content)\n4. Render footer section separately - same as before\n5. Combine: header + m.viewport.View() + footer\n\nHandle the not-ready case: if !m.ready, return a loading message\n\nThe key change is that content goes through viewport.View() which handles the scrolling.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T22:13:01.933242+01:00","created_by":"kostya","updated_at":"2026-01-03T22:18:42.288156+01:00","closed_at":"2026-01-03T22:18:42.288156+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-6mv.7","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:01.93363+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.7","depends_on_id":"netmon-6mv.3","type":"blocks","created_at":"2026-01-03T22:13:09.359331+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.7","depends_on_id":"netmon-6mv.4","type":"blocks","created_at":"2026-01-03T22:13:09.434897+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv.8","title":"Add scroll position indicator to footer","description":"In internal/ui/view.go, enhance the footer to show scroll position:\n\n1. Calculate scroll percentage: m.viewport.ScrollPercent() * 100\n2. Add to footer string: e.g., '↑↓/jk Navigate  ... q Quit  [42%]'\n3. Only show percentage if content exceeds viewport (scrollable)\n\nThis gives users visual feedback about their position in the list, similar to k9s.\n\nOptional enhancement - could be skipped if too noisy.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T22:13:02.158381+01:00","created_by":"kostya","updated_at":"2026-01-03T22:24:14.906123+01:00","closed_at":"2026-01-03T22:24:14.906123+01:00","close_reason":"Skipped - optional enhancement","dependencies":[{"issue_id":"netmon-6mv.8","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:02.158787+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.8","depends_on_id":"netmon-6mv.7","type":"blocks","created_at":"2026-01-03T22:13:09.51793+01:00","created_by":"kostya"}]}
{"id":"netmon-6mv.9","title":"Update existing tests for viewport changes","description":"In internal/ui/*_test.go files:\n\n1. Review view_test.go - tests may need to account for viewport wrapper\n2. Review update_test.go - tests need to send WindowSizeMsg first to initialize viewport\n3. Add test helper that sends a standard WindowSizeMsg (e.g., 80x24) before other operations\n4. Verify all existing tests pass with the new viewport structure\n\nKey: existing behavior should be unchanged, just wrapped in viewport.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T22:13:02.401156+01:00","created_by":"kostya","updated_at":"2026-01-03T22:20:08.312424+01:00","closed_at":"2026-01-03T22:20:08.312424+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-6mv.9","depends_on_id":"netmon-6mv","type":"parent-child","created_at":"2026-01-03T22:13:02.401546+01:00","created_by":"kostya"},{"issue_id":"netmon-6mv.9","depends_on_id":"netmon-6mv.7","type":"blocks","created_at":"2026-01-03T22:13:09.600139+01:00","created_by":"kostya"}]}
{"id":"netmon-793","title":"Add table view styles to styles.go","description":"Add new styles to internal/ui/styles.go:\n\n- TableHeaderStyle: for column headers [1]Process, [2]Proto, etc.\n- TableSeparatorStyle: for the ─ line below headers\n\nMatch existing color scheme. Headers should be distinct but not overwhelming.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:14.453283+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:14.453283+01:00"}
{"id":"netmon-92s","title":"Update navigation for table view cursor","description":"Modify navigation handlers in internal/ui/update.go:\n\nFor j/k/↑/↓ keys, branch on viewMode:\n- ViewGrouped: use existing m.cursor logic\n- ViewTable: use m.tableCursor, bounds = len(flattenConnections())\n\nFor h/l/←/→ keys:\n- ViewGrouped: existing expand/collapse logic\n- ViewTable: no-op (ignore these keys)\n\nUpdate cursorLinePosition() to return m.tableCursor directly in table view.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:16.640741+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:16.640741+01:00","dependencies":[{"issue_id":"netmon-92s","depends_on_id":"netmon-w58","type":"blocks","created_at":"2026-01-03T22:39:28.744535+01:00","created_by":"kostya"},{"issue_id":"netmon-92s","depends_on_id":"netmon-3e1","type":"blocks","created_at":"2026-01-03T22:39:28.826675+01:00","created_by":"kostya"}]}
{"id":"netmon-9h0","title":"Implement sortConnections function","description":"Add sorting function to internal/ui/view.go:\n\n```go\nfunc (m Model) sortConnections(conns []FlatConnection) []FlatConnection\n```\n\nSort the flattened connections based on m.sortColumn and m.sortAscending:\n- SortProcess: alphabetical by ProcessName\n- SortProtocol: TCP before UDP (or vice versa)\n- SortLocal: alphabetical by local address\n- SortRemote: alphabetical by remote address\n- SortState: alphabetical by state\n\nReturns a new sorted slice (don't mutate input).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:14.93659+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:14.93659+01:00","dependencies":[{"issue_id":"netmon-9h0","depends_on_id":"netmon-3e1","type":"blocks","created_at":"2026-01-03T22:39:28.032743+01:00","created_by":"kostya"}]}
{"id":"netmon-al5","title":"Code Quality \u0026 Reliability Improvements","description":"Epic to track all code quality issues identified in the comprehensive codebase review. Focuses on data integrity, error handling, and type safety improvements.\n\n## Summary\n- 4 critical issues (data corruption, silent failures)\n- 6 important issues (unused code, type design)\n- 0% test coverage\n\n## Goals\n1. Fix data integrity issues (process cache, dropped connections)\n2. Surface errors to users instead of hiding them\n3. Clean up unused code\n4. Improve type safety\n5. Add test coverage","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-03T21:26:21.134923+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:11.177594+01:00","closed_at":"2026-01-03T21:59:11.177594+01:00","close_reason":"Closed"}
{"id":"netmon-al5.1","title":"Fix process cache invalidation - data corruption risk","description":"## Problem\nThe `processCache` in `internal/collector/darwin.go:17-26` grows indefinitely and never clears entries. When a process terminates and its PID is reused by a different process, the cache returns the **wrong process name**.\n\n## Impact\n- **Data Corruption**: Users see incorrect process names for connections\n- **Memory Leak**: Cache grows unbounded over long runtimes\n- **Security Risk**: Network monitoring shows wrong application for connections\n\n## Location\n```go\n// internal/collector/darwin.go:17-26\ntype darwinCollector struct {\n    processCache map[int32]string\n    cacheMu      sync.RWMutex\n}\n```\n\n## Acceptance Criteria\n- [ ] Process cache has invalidation mechanism\n- [ ] Stale entries are cleared when PIDs are reused\n- [ ] Memory usage is bounded over long runtimes\n\n## Suggested Solutions\n1. **TTL-based expiration**: Add timestamp to cache entries, expire after N seconds\n2. **Clear on cycle**: Clear entire cache at start of each collection cycle\n3. **Verify on hit**: When returning cached name, verify process still exists with that name\n\n## Notes\nPIDs are reused frequently on macOS/Linux. This is a 'when' not 'if' bug.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-03T21:27:30.397921+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:06.061258+01:00","closed_at":"2026-01-03T21:59:06.061258+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-al5.1","depends_on_id":"netmon-al5","type":"parent-child","created_at":"2026-01-03T21:27:30.399653+01:00","created_by":"kostya"}]}
{"id":"netmon-al5.2","title":"Surface data collection errors to users","description":"## Problem\nAll data collection errors are silently swallowed in `internal/ui/update.go:81-85`. Users see stale data with no indication anything is wrong.\n\n## Location\n```go\n// internal/ui/update.go:81-85\ncase DataMsg:\n    if msg.Err != nil {\n        // Handle error - for now just ignore and keep old data\n        return m, nil\n    }\n```\n\n## Impact\nUsers have no visibility into:\n- Permission errors (macOS requires entitlements for network monitoring)\n- System call failures\n- Context timeouts\n- Any gopsutil library errors\n\n## Acceptance Criteria\n- [ ] Add `lastError` and `lastErrorTime` fields to Model struct\n- [ ] Display errors in the UI when they occur\n- [ ] Clear error state on successful data fetch\n- [ ] Style error display appropriately (red/warning color)\n\n## Implementation\n1. Add fields to `internal/ui/model.go`:\n```go\ntype Model struct {\n    // ... existing fields\n    lastError     error\n    lastErrorTime time.Time\n}\n```\n\n2. Update `internal/ui/update.go`:\n```go\ncase DataMsg:\n    if msg.Err != nil {\n        m.lastError = msg.Err\n        m.lastErrorTime = time.Now()\n        return m, nil\n    }\n    m.lastError = nil\n```\n\n3. Add error display in `internal/ui/view.go`\n\n4. Add `ErrorStyle` in `internal/ui/styles.go`","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-03T21:27:30.611558+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:06.062768+01:00","closed_at":"2026-01-03T21:59:06.062768+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-al5.2","depends_on_id":"netmon-al5","type":"parent-child","created_at":"2026-01-03T21:27:30.612006+01:00","created_by":"kostya"}]}
{"id":"netmon-al5.3","title":"Track and display skipped connections","description":"## Problem\nWhen process name lookup fails, connections are silently dropped from results in `internal/collector/darwin.go:46-48`. Users think applications have no network connections when they actually do.\n\n## Location\n```go\n// internal/collector/darwin.go:46-48\nname := c.getProcessName(ctx, conn.Pid)\nif name == \"\" {\n    continue // Skip if we can't get process name\n}\n```\n\nAnd:\n```go\n// internal/collector/darwin.go:102-110\nproc, err := process.NewProcessWithContext(ctx, pid)\nif err != nil {\n    return \"\"\n}\nname, err := proc.NameWithContext(ctx)\nif err != nil {\n    return \"\"\n}\n```\n\n## Impact\n- Network connections silently hidden from users\n- Security monitoring compromised\n- No way to know how many connections are being dropped\n- Permission issues go undetected\n\n## Acceptance Criteria\n- [ ] Track count of skipped connections during collection\n- [ ] Return skipped count in NetworkSnapshot or separate field\n- [ ] Display skipped count in UI (e.g., \"Showing 45 connections (3 hidden)\")\n- [ ] Optionally: Show connections with \"Unknown\" process name instead of hiding\n\n## Implementation Options\n\n### Option A: Add skipped count to snapshot\n```go\ntype NetworkSnapshot struct {\n    Applications []Application\n    Timestamp    time.Time\n    SkippedCount int  // NEW\n}\n```\n\n### Option B: Show unknown processes\nInstead of skipping, group under \"Unknown\" or \"\u003cpid:1234\u003e\":\n```go\nname := c.getProcessName(ctx, conn.Pid)\nif name == \"\" {\n    name = fmt.Sprintf(\"\u003cpid:%d\u003e\", conn.Pid)\n}\n```","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-03T21:27:30.838204+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:06.063867+01:00","closed_at":"2026-01-03T21:59:06.063867+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-al5.3","depends_on_id":"netmon-al5","type":"parent-child","created_at":"2026-01-03T21:27:30.8386+01:00","created_by":"kostya"}]}
{"id":"netmon-al5.4","title":"Remove unused code","description":"## Problem\nSeveral pieces of code are defined but never used, adding maintenance burden.\n\n## Unused Code to Remove\n\n### 1. internal/model/network.go:25-27\n```go\nfunc (a *Application) ConnectionCount() int {\n    return len(a.Connections)\n}\n```\nNever called - all usages use `len(app.Connections)` directly.\n\n### 2. internal/model/network.go:43-49\n```go\nfunc (s *NetworkSnapshot) TotalConnections() int {\n    total := 0\n    for _, app := range s.Applications {\n        total += len(app.Connections)\n    }\n    return total\n}\n```\nNever called anywhere.\n\n### 3. internal/ui/styles.go:47-51\n```go\nExpandedIconStyle = lipgloss.NewStyle().\n    Foreground(lipgloss.Color(\"#7D56F4\"))\n\nCollapsedIconStyle = lipgloss.NewStyle().\n    Foreground(lipgloss.Color(\"#555555\"))\n```\nDefined but icons rendered as plain strings without these styles.\n\n### 4. internal/ui/model.go:43\n```go\nsnapshot: nil,\n```\nRedundant - Go zero-initializes to nil.\n\n### 5. internal/collector/darwin.go:55-56\n```go\nPIDs:     []int32{},\nExpanded: false,\n```\nRedundant initializations.\n\n## Acceptance Criteria\n- [ ] Remove all unused code listed above\n- [ ] Verify build still passes\n- [ ] Run `go vet` and `golangci-lint` to confirm no issues","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-03T21:27:31.07816+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:06.064862+01:00","closed_at":"2026-01-03T21:59:06.064862+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-al5.4","depends_on_id":"netmon-al5","type":"parent-child","created_at":"2026-01-03T21:27:31.078571+01:00","created_by":"kostya"}]}
{"id":"netmon-al5.5","title":"Extract UI state from domain model","description":"## Problem\nThe `Application` struct in `internal/model/network.go:21` contains UI state (`Expanded`) mixed with domain data. This violates separation of concerns.\n\n## Location\n```go\n// internal/model/network.go:17-22\ntype Application struct {\n    Name        string\n    PIDs        []int32\n    Connections []Connection\n    Expanded    bool  // \u003c-- UI state in domain model\n}\n```\n\n## Impact\n- Domain model coupled to UI concerns\n- Makes testing harder\n- Confusing API - why does a network Application know about being \"expanded\"?\n\n## Acceptance Criteria\n- [ ] Remove `Expanded` field from `Application` struct\n- [ ] Add `expandedApps map[string]bool` to UI Model\n- [ ] Update `mergeExpandedState` to use the new map\n- [ ] Update view rendering to check the map instead of struct field\n\n## Implementation\n\n### 1. Update internal/ui/model.go\n```go\ntype Model struct {\n    snapshot     *model.NetworkSnapshot\n    collector    collector.Collector\n    cursor       int\n    quitting     bool\n    refreshInterval time.Duration\n    width        int\n    height       int\n    expandedApps map[string]bool  // NEW: track expanded state by app name\n}\n```\n\n### 2. Update internal/model/network.go\nRemove `Expanded bool` from Application struct.\n\n### 3. Update internal/ui/view.go\n```go\nfunc (m Model) renderAppHeader(app model.Application, isSelected bool) string {\n    expanded := m.expandedApps[app.Name]  // Check map instead of struct\n    expandIcon := \"▶\"\n    if expanded {\n        expandIcon = \"▼\"\n    }\n    // ...\n}\n```\n\n### 4. Update internal/ui/update.go\nUpdate toggle logic to modify the map instead of struct field.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:27:31.326055+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:06.065891+01:00","closed_at":"2026-01-03T21:59:06.065891+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-al5.5","depends_on_id":"netmon-al5","type":"parent-child","created_at":"2026-01-03T21:27:31.326457+01:00","created_by":"kostya"}]}
{"id":"netmon-al5.6","title":"Add typed constants for Protocol and State","description":"## Problem\n`Protocol` and `State` fields in `Connection` struct are raw strings, allowing any value including typos.\n\n## Location\n```go\n// internal/model/network.go:9-14\ntype Connection struct {\n    Protocol   string // TCP or UDP  \u003c-- raw string\n    LocalAddr  string\n    RemoteAddr string\n    State      string // ESTABLISHED, LISTEN, etc  \u003c-- raw string\n}\n```\n\n## Impact\n- No compile-time checking for valid values\n- Easy to introduce typos (\"tcp\" vs \"TCP\")\n- No IDE autocomplete for valid options\n- API doesn't communicate valid values\n\n## Acceptance Criteria\n- [ ] Define `type Protocol string` with constants\n- [ ] Define `type ConnectionState string` with constants\n- [ ] Update `Connection` struct to use new types\n- [ ] Update collector to use constants\n- [ ] Verify build passes\n\n## Implementation\n\n### 1. Add to internal/model/network.go\n```go\n// Protocol represents a network protocol.\ntype Protocol string\n\nconst (\n    ProtocolTCP     Protocol = \"TCP\"\n    ProtocolUDP     Protocol = \"UDP\"\n    ProtocolUnknown Protocol = \"UNK\"\n)\n\n// ConnectionState represents a TCP connection state.\ntype ConnectionState string\n\nconst (\n    StateEstablished ConnectionState = \"ESTABLISHED\"\n    StateListen      ConnectionState = \"LISTEN\"\n    StateTimeWait    ConnectionState = \"TIME_WAIT\"\n    StateCloseWait   ConnectionState = \"CLOSE_WAIT\"\n    StateNone        ConnectionState = \"-\"\n    // Add others as needed\n)\n\ntype Connection struct {\n    Protocol   Protocol\n    LocalAddr  string\n    RemoteAddr string\n    State      ConnectionState\n}\n```\n\n### 2. Update internal/collector/darwin.go\n```go\nfunc (c *darwinCollector) getProtocol(connType uint32) model.Protocol {\n    switch connType {\n    case 1:\n        return model.ProtocolTCP\n    case 2:\n        return model.ProtocolUDP\n    default:\n        return model.ProtocolUnknown\n    }\n}\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:27:44.402857+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:06.066907+01:00","closed_at":"2026-01-03T21:59:06.066907+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-al5.6","depends_on_id":"netmon-al5","type":"parent-child","created_at":"2026-01-03T21:27:44.405635+01:00","created_by":"kostya"}]}
{"id":"netmon-al5.7","title":"Make UI responsive using width/height","description":"## Problem\nThe `width` and `height` fields in Model are set from `tea.WindowSizeMsg` but never used. UI uses hardcoded widths.\n\n## Locations\n```go\n// internal/ui/model.go:33-34\nwidth  int\nheight int\n```\n\n```go\n// internal/ui/update.go:22-25\ncase tea.WindowSizeMsg:\n    m.width = msg.Width\n    m.height = msg.Height\n    return m, nil\n```\n\n```go\n// internal/ui/view.go:86\npadding := 50 - len(leftPart)  // \u003c-- hardcoded width\n```\n\n## Impact\n- UI doesn't adapt to terminal size\n- Columns misaligned on narrow terminals\n- Wasted space on wide terminals\n\n## Acceptance Criteria\n- [ ] Calculate padding dynamically based on `m.width`\n- [ ] Handle narrow terminals gracefully (truncate or wrap)\n- [ ] Test with various terminal widths\n\n## Implementation\n```go\nfunc (m Model) renderAppHeader(app model.Application, isSelected bool) string {\n    // Use actual width, with fallback\n    availableWidth := m.width\n    if availableWidth == 0 {\n        availableWidth = 80  // fallback\n    }\n    \n    // Reserve space for PIDs on right\n    pidsStr := formatPIDs(app.PIDs)\n    leftMaxWidth := availableWidth - len(pidsStr) - 4  // padding\n    \n    // Build and truncate left part if needed\n    // ...\n}\n```","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T21:27:44.63334+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:06.067855+01:00","closed_at":"2026-01-03T21:59:06.067855+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-al5.7","depends_on_id":"netmon-al5","type":"parent-child","created_at":"2026-01-03T21:27:44.633794+01:00","created_by":"kostya"}]}
{"id":"netmon-al5.8","title":"Add context cancellation checks in collector","description":"## Problem\nThe `Collect` function doesn't check for context cancellation during the potentially long loop iterating through connections.\n\n## Location\n```go\n// internal/collector/darwin.go:38-74\nfor _, conn := range connections {\n    // No cancellation check here!\n    \n    if conn.Pid == 0 {\n        continue\n    }\n    \n    name := c.getProcessName(ctx, conn.Pid)  // Could be slow\n    // ...\n}\n```\n\n## Impact\n- Application may be slow to quit\n- Timeout doesn't work as expected during long collection cycles\n- Resources wasted processing data that will be discarded\n\n## Acceptance Criteria\n- [ ] Check `ctx.Err()` at start of each loop iteration\n- [ ] Return early with context error if cancelled\n- [ ] Verify quick shutdown with many connections\n\n## Implementation\n```go\nfor _, conn := range connections {\n    // Check for cancellation\n    if err := ctx.Err(); err != nil {\n        return nil, err\n    }\n    \n    if conn.Pid == 0 {\n        continue\n    }\n    // ...\n}\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:27:44.880383+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:06.068827+01:00","closed_at":"2026-01-03T21:59:06.068827+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-al5.8","depends_on_id":"netmon-al5","type":"parent-child","created_at":"2026-01-03T21:27:44.880828+01:00","created_by":"kostya"}]}
{"id":"netmon-al5.9","title":"Add unit tests for model and collector","description":"## Problem\nThe codebase has 0% test coverage. All packages show `[no test files]` when running `go test ./...`.\n\n## Current State\n```\n? github.com/kostyay/netmon/cmd/netmon        [no test files]\n? github.com/kostyay/netmon/internal/collector [no test files]\n? github.com/kostyay/netmon/internal/model    [no test files]\n? github.com/kostyay/netmon/internal/ui       [no test files]\n```\n\n## Acceptance Criteria\n- [ ] Add tests for `internal/model` package\n- [ ] Add tests for `internal/collector` package (may need mocking)\n- [ ] Achieve at least 60% coverage on model package\n- [ ] All tests pass with `go test ./...`\n\n## Test Cases\n\n### internal/model/network_test.go\n```go\nfunc TestNetworkSnapshot_SortByConnectionCount(t *testing.T)\nfunc TestNetworkSnapshot_TotalConnections(t *testing.T)  // if kept\nfunc TestApplication_ConnectionCount(t *testing.T)  // if kept\nfunc TestConnection_fields(t *testing.T)  // basic struct tests\n```\n\n### internal/collector/darwin_test.go\n```go\nfunc TestFormatAddr(t *testing.T)\nfunc TestContainsPID(t *testing.T)\nfunc TestGetProtocol(t *testing.T)\nfunc TestGetState(t *testing.T)\n```\n\n### internal/ui/view_test.go\n```go\nfunc TestFormatPIDs(t *testing.T)\nfunc TestTruncateAddr(t *testing.T)\n```\n\n## Notes\n- Helper functions like `formatAddr`, `containsPID`, `formatPIDs` are easy to test\n- Collector.Collect() may need interface mocking or integration test approach\n- UI Model tests can verify state transitions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:27:45.128019+01:00","created_by":"kostya","updated_at":"2026-01-03T21:59:06.069855+01:00","closed_at":"2026-01-03T21:59:06.069855+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-al5.9","depends_on_id":"netmon-al5","type":"parent-child","created_at":"2026-01-03T21:27:45.128454+01:00","created_by":"kostya"}]}
{"id":"netmon-d8x","title":"Implement renderTable function","description":"Add to internal/ui/view.go:\n\n```go\nfunc (m Model) renderTable() string\n```\n\nRender the full table view:\n1. Call renderTableHeader() for headers\n2. Call flattenConnections() to get data\n3. Call sortConnections() to apply sort\n4. Render each row with columns:\n   - Process: 14 chars, left-aligned\n   - Proto: 5 chars\n   - Local: 21 chars (truncate with ...)\n   - Remote: 21 chars (truncate with ...)\n   - State: 11 chars\n5. Show ▶ marker on selected row (tableCursor)\n6. Use SelectedConnStyle for selected row","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:15.413992+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:15.413992+01:00","dependencies":[{"issue_id":"netmon-d8x","depends_on_id":"netmon-3e1","type":"blocks","created_at":"2026-01-03T22:39:28.243477+01:00","created_by":"kostya"},{"issue_id":"netmon-d8x","depends_on_id":"netmon-9h0","type":"blocks","created_at":"2026-01-03T22:39:28.310855+01:00","created_by":"kostya"},{"issue_id":"netmon-d8x","depends_on_id":"netmon-ot6","type":"blocks","created_at":"2026-01-03T22:39:28.376347+01:00","created_by":"kostya"}]}
{"id":"netmon-d9g","title":"Add tests for table view rendering","description":"Add tests to internal/ui/view_test.go:\n\n- TestRenderTableHeader: verify header format and sort indicators\n- TestRenderTable: verify table layout, column widths, truncation\n- TestFlattenConnections: verify flattening logic\n- TestSortConnections: verify each sort column, both directions\n- TestTableViewSelection: verify ▶ marker on correct row","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:16.883324+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:16.883324+01:00","dependencies":[{"issue_id":"netmon-d9g","depends_on_id":"netmon-d8x","type":"blocks","created_at":"2026-01-03T22:39:28.895606+01:00","created_by":"kostya"}]}
{"id":"netmon-ot6","title":"Implement renderTableHeader function","description":"Add to internal/ui/view.go:\n\n```go\nfunc (m Model) renderTableHeader() string\n```\n\nRender column headers with sort indicators:\n- Format: [1]Process  [2]Proto [3]Local               [4]Remote              [5]State\n- Active sort column gets ▲ (ascending) or ▼ (descending) appended\n- Use TableHeaderStyle\n- Follow with separator line of ─ characters (terminal width)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:15.185686+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:15.185686+01:00","dependencies":[{"issue_id":"netmon-ot6","depends_on_id":"netmon-w58","type":"blocks","created_at":"2026-01-03T22:39:28.109753+01:00","created_by":"kostya"},{"issue_id":"netmon-ot6","depends_on_id":"netmon-793","type":"blocks","created_at":"2026-01-03T22:39:28.182001+01:00","created_by":"kostya"}]}
{"id":"netmon-q3p","title":"Test Coverage: Achieve comprehensive test suite","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-03T21:33:46.3586+01:00","created_by":"kostya","updated_at":"2026-01-03T21:40:17.968362+01:00","closed_at":"2026-01-03T21:40:17.968362+01:00","close_reason":"All test tasks completed - comprehensive test coverage achieved"}
{"id":"netmon-q3p.1","title":"P1: Add model package tests (network_test.go)","description":"Pure unit tests for internal/model/network.go: TestApplicationConnectionCount, TestNetworkSnapshotSortByConnectionCount, TestNetworkSnapshotTotalConnections","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T21:34:02.925755+01:00","created_by":"kostya","updated_at":"2026-01-03T21:36:11.797681+01:00","closed_at":"2026-01-03T21:36:11.797681+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-q3p.1","depends_on_id":"netmon-q3p","type":"parent-child","created_at":"2026-01-03T21:34:02.927885+01:00","created_by":"kostya"}]}
{"id":"netmon-q3p.2","title":"P1: Add collector helper function tests (darwin_test.go)","description":"Pure unit tests for helper functions: formatAddr, containsPID, getProtocol - no mocking needed","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T21:34:03.102682+01:00","created_by":"kostya","updated_at":"2026-01-03T21:36:11.79931+01:00","closed_at":"2026-01-03T21:36:11.79931+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-q3p.2","depends_on_id":"netmon-q3p","type":"parent-child","created_at":"2026-01-03T21:34:03.103132+01:00","created_by":"kostya"}]}
{"id":"netmon-q3p.3","title":"P1: Add UI utility function tests (view_test.go)","description":"Pure unit tests for utility functions: formatPIDs, truncateAddr","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T21:34:03.283644+01:00","created_by":"kostya","updated_at":"2026-01-03T21:36:11.800533+01:00","closed_at":"2026-01-03T21:36:11.800533+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-q3p.3","depends_on_id":"netmon-q3p","type":"parent-child","created_at":"2026-01-03T21:34:03.28404+01:00","created_by":"kostya"}]}
{"id":"netmon-q3p.4","title":"P2: Add UI update tests with mock collector","description":"Tests for Model.Update() handling all message types: KeyMsg, TickMsg, DataMsg, WindowSizeMsg. Requires mock collector.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:34:03.476757+01:00","created_by":"kostya","updated_at":"2026-01-03T21:38:24.157268+01:00","closed_at":"2026-01-03T21:38:24.157268+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-q3p.4","depends_on_id":"netmon-q3p","type":"parent-child","created_at":"2026-01-03T21:34:03.477141+01:00","created_by":"kostya"},{"issue_id":"netmon-q3p.4","depends_on_id":"netmon-q3p.1","type":"blocks","created_at":"2026-01-03T21:34:13.540748+01:00","created_by":"kostya"},{"issue_id":"netmon-q3p.4","depends_on_id":"netmon-q3p.2","type":"blocks","created_at":"2026-01-03T21:34:13.629492+01:00","created_by":"kostya"},{"issue_id":"netmon-q3p.4","depends_on_id":"netmon-q3p.3","type":"blocks","created_at":"2026-01-03T21:34:13.708315+01:00","created_by":"kostya"}]}
{"id":"netmon-q3p.5","title":"P2: Add UI model tests with mock collector","description":"Tests for NewModel(), Init(), and model state management with mock collector injection","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:34:03.698406+01:00","created_by":"kostya","updated_at":"2026-01-03T21:38:24.158623+01:00","closed_at":"2026-01-03T21:38:24.158623+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-q3p.5","depends_on_id":"netmon-q3p","type":"parent-child","created_at":"2026-01-03T21:34:03.69878+01:00","created_by":"kostya"},{"issue_id":"netmon-q3p.5","depends_on_id":"netmon-q3p.1","type":"blocks","created_at":"2026-01-03T21:34:13.780339+01:00","created_by":"kostya"},{"issue_id":"netmon-q3p.5","depends_on_id":"netmon-q3p.2","type":"blocks","created_at":"2026-01-03T21:34:13.845591+01:00","created_by":"kostya"}]}
{"id":"netmon-q3p.6","title":"P2: Add collector interface and integration tests","description":"Tests for Collector interface compliance, darwinCollector.Collect() with gopsutil mocks, getProcessName caching tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T21:34:03.929269+01:00","created_by":"kostya","updated_at":"2026-01-03T21:38:24.159677+01:00","closed_at":"2026-01-03T21:38:24.159677+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-q3p.6","depends_on_id":"netmon-q3p","type":"parent-child","created_at":"2026-01-03T21:34:03.929637+01:00","created_by":"kostya"},{"issue_id":"netmon-q3p.6","depends_on_id":"netmon-q3p.2","type":"blocks","created_at":"2026-01-03T21:34:13.920387+01:00","created_by":"kostya"}]}
{"id":"netmon-q3p.7","title":"P3: Add main.go integration/smoke test","description":"Integration test for cmd/netmon/main.go - full system verification","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T21:34:04.155567+01:00","created_by":"kostya","updated_at":"2026-01-03T21:40:10.455188+01:00","closed_at":"2026-01-03T21:40:10.455188+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-q3p.7","depends_on_id":"netmon-q3p","type":"parent-child","created_at":"2026-01-03T21:34:04.155926+01:00","created_by":"kostya"},{"issue_id":"netmon-q3p.7","depends_on_id":"netmon-q3p.4","type":"blocks","created_at":"2026-01-03T21:34:13.997189+01:00","created_by":"kostya"},{"issue_id":"netmon-q3p.7","depends_on_id":"netmon-q3p.5","type":"blocks","created_at":"2026-01-03T21:34:14.100836+01:00","created_by":"kostya"},{"issue_id":"netmon-q3p.7","depends_on_id":"netmon-q3p.6","type":"blocks","created_at":"2026-01-03T21:34:14.183142+01:00","created_by":"kostya"}]}
{"id":"netmon-qsg","title":"Add 'v' key handler for view toggle","description":"Add key handler in internal/ui/update.go:\n\nCase 'v':\n- Toggle m.viewMode between ViewGrouped and ViewTable\n- Return updated model, no command\n\nThis is the primary UX for switching views.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:16.132485+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:16.132485+01:00","dependencies":[{"issue_id":"netmon-qsg","depends_on_id":"netmon-w58","type":"blocks","created_at":"2026-01-03T22:39:28.582196+01:00","created_by":"kostya"}]}
{"id":"netmon-vva","title":"Add tests for view switching and key handlers","description":"Add tests to internal/ui/update_test.go:\n\n- TestViewToggle: verify 'v' switches viewMode\n- TestSortKeyHandlers: verify 1-5 keys set sortColumn and toggle direction\n- TestSortKeysIgnoredInGroupedView: verify 1-5 do nothing in grouped view\n- TestTableNavigation: verify j/k moves tableCursor\n- TestExpandCollapseIgnoredInTableView: verify h/l do nothing in table view\n- TestCursorPersistence: verify switching views preserves each cursor","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:17.139302+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:17.139302+01:00","dependencies":[{"issue_id":"netmon-vva","depends_on_id":"netmon-qsg","type":"blocks","created_at":"2026-01-03T22:39:28.974582+01:00","created_by":"kostya"},{"issue_id":"netmon-vva","depends_on_id":"netmon-0wq","type":"blocks","created_at":"2026-01-03T22:39:29.054363+01:00","created_by":"kostya"},{"issue_id":"netmon-vva","depends_on_id":"netmon-92s","type":"blocks","created_at":"2026-01-03T22:39:29.137452+01:00","created_by":"kostya"}]}
{"id":"netmon-w58","title":"Add ViewMode and SortColumn types to model.go","description":"Add new types and constants to internal/ui/model.go:\n\n```go\ntype ViewMode int\n\nconst (\n    ViewGrouped ViewMode = iota\n    ViewTable\n)\n\ntype SortColumn int\n\nconst (\n    SortProcess SortColumn = iota\n    SortProtocol\n    SortLocal\n    SortRemote\n    SortState\n)\n```\n\nAdd fields to Model struct:\n- viewMode ViewMode (default: ViewGrouped)\n- sortColumn SortColumn (default: SortProcess)\n- sortAscending bool (default: true)\n- tableCursor int (default: 0)\n\nUpdate NewModel() to initialize these fields.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T22:37:14.224113+01:00","created_by":"kostya","updated_at":"2026-01-03T22:37:14.224113+01:00"}
{"id":"netmon-yr9","title":"Scaffold Go TUI Network Monitor","description":"Initialize a Go TUI application using Bubble Tea for monitoring network connections on macOS. Includes project structure, linting, Makefile, and basic UI scaffold with table showing applications and ports.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-03T20:37:05.783912+01:00","created_by":"kostya","updated_at":"2026-01-03T20:46:41.381466+01:00","closed_at":"2026-01-03T20:46:41.381466+01:00","close_reason":"Closed"}
{"id":"netmon-yr9.1","title":"Create project directory structure","description":"Create the flat project structure:\n- cmd/netmon/main.go\n- internal/ui/model.go\n- internal/ui/update.go  \n- internal/ui/view.go\n- internal/ui/styles.go","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:25.602983+01:00","created_by":"kostya","updated_at":"2026-01-03T20:39:46.319409+01:00","closed_at":"2026-01-03T20:39:46.319409+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.1","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:25.605043+01:00","created_by":"kostya"}]}
{"id":"netmon-yr9.10","title":"Verify build and run","description":"Run make build, make lint, make run to verify:\n- Project compiles without errors\n- Linter passes\n- TUI displays and responds to q to quit","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:27.569189+01:00","created_by":"kostya","updated_at":"2026-01-03T20:46:30.592615+01:00","closed_at":"2026-01-03T20:46:30.592615+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.10","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:27.569601+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.10","depends_on_id":"netmon-yr9.9","type":"blocks","created_at":"2026-01-03T20:37:42.160229+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.10","depends_on_id":"netmon-yr9.3","type":"blocks","created_at":"2026-01-03T20:37:42.230051+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.10","depends_on_id":"netmon-yr9.4","type":"blocks","created_at":"2026-01-03T20:37:42.302314+01:00","created_by":"kostya"}]}
{"id":"netmon-yr9.2","title":"Add Bubble Tea dependencies","description":"Add Go dependencies:\n- github.com/charmbracelet/bubbletea\n- github.com/charmbracelet/lipgloss\n- github.com/charmbracelet/bubbles","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:25.806935+01:00","created_by":"kostya","updated_at":"2026-01-03T20:40:14.187078+01:00","closed_at":"2026-01-03T20:40:14.187078+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.2","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:25.807369+01:00","created_by":"kostya"}]}
{"id":"netmon-yr9.3","title":"Configure golangci-lint","description":"Create .golangci.yml with standard linters:\n- gofmt, govet, errcheck, staticcheck\n- gosimple, ineffassign, unused","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:26.020734+01:00","created_by":"kostya","updated_at":"2026-01-03T20:40:14.188811+01:00","closed_at":"2026-01-03T20:40:14.188811+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.3","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:26.02113+01:00","created_by":"kostya"}]}
{"id":"netmon-yr9.4","title":"Create Makefile with core targets","description":"Create Makefile with targets:\n- build: go build -o bin/netmon ./cmd/netmon\n- test: go test ./...\n- fmt: gofmt -w .\n- lint: golangci-lint run\n- run: go run ./cmd/netmon","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:26.225718+01:00","created_by":"kostya","updated_at":"2026-01-03T20:40:14.190187+01:00","closed_at":"2026-01-03T20:40:14.190187+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.4","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:26.226084+01:00","created_by":"kostya"}]}
{"id":"netmon-yr9.5","title":"Implement TUI Model","description":"Create internal/ui/model.go with:\n- Model struct containing table.Model and quitting bool\n- NewModel() constructor initializing table with columns:\n  Application (20), PID (8), Port (8), Protocol (10)\n- Placeholder row showing 'No data'","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:26.434511+01:00","created_by":"kostya","updated_at":"2026-01-03T20:41:14.016027+01:00","closed_at":"2026-01-03T20:41:14.016027+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.5","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:26.434897+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.5","depends_on_id":"netmon-yr9.1","type":"blocks","created_at":"2026-01-03T20:37:41.165523+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.5","depends_on_id":"netmon-yr9.2","type":"blocks","created_at":"2026-01-03T20:37:41.243227+01:00","created_by":"kostya"}]}
{"id":"netmon-yr9.6","title":"Implement TUI Update handler","description":"Create internal/ui/update.go with:\n- Init() returning nil command\n- Update() handling tea.KeyMsg for q/ctrl+c quit\n- Delegate other keys to table component","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:26.64613+01:00","created_by":"kostya","updated_at":"2026-01-03T20:41:14.017473+01:00","closed_at":"2026-01-03T20:41:14.017473+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.6","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:26.646561+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.6","depends_on_id":"netmon-yr9.5","type":"blocks","created_at":"2026-01-03T20:37:41.382566+01:00","created_by":"kostya"}]}
{"id":"netmon-yr9.7","title":"Implement TUI View renderer","description":"Create internal/ui/view.go with:\n- View() method rendering header, table, and footer\n- Header: 'netmon - Network Monitor'\n- Footer: 'Press q to quit'","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:26.862459+01:00","created_by":"kostya","updated_at":"2026-01-03T20:41:14.018593+01:00","closed_at":"2026-01-03T20:41:14.018593+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.7","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:26.862828+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.7","depends_on_id":"netmon-yr9.5","type":"blocks","created_at":"2026-01-03T20:37:41.549881+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.7","depends_on_id":"netmon-yr9.8","type":"blocks","created_at":"2026-01-03T20:37:41.625378+01:00","created_by":"kostya"}]}
{"id":"netmon-yr9.8","title":"Create Lip Gloss styles","description":"Create internal/ui/styles.go with:\n- HeaderStyle: subtle purple color\n- FooterStyle: muted/dim text\n- TableStyle: basic styling for table component","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:27.094602+01:00","created_by":"kostya","updated_at":"2026-01-03T20:41:14.019614+01:00","closed_at":"2026-01-03T20:41:14.019614+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.8","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:27.094955+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.8","depends_on_id":"netmon-yr9.2","type":"blocks","created_at":"2026-01-03T20:37:41.779619+01:00","created_by":"kostya"}]}
{"id":"netmon-yr9.9","title":"Create main.go entry point","description":"Create cmd/netmon/main.go with:\n- Initialize Model via NewModel()\n- Create and run tea.Program\n- Handle errors and exit codes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T20:37:27.326626+01:00","created_by":"kostya","updated_at":"2026-01-03T20:41:14.020801+01:00","closed_at":"2026-01-03T20:41:14.020801+01:00","close_reason":"Closed","dependencies":[{"issue_id":"netmon-yr9.9","depends_on_id":"netmon-yr9","type":"parent-child","created_at":"2026-01-03T20:37:27.326986+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.9","depends_on_id":"netmon-yr9.6","type":"blocks","created_at":"2026-01-03T20:37:41.929762+01:00","created_by":"kostya"},{"issue_id":"netmon-yr9.9","depends_on_id":"netmon-yr9.7","type":"blocks","created_at":"2026-01-03T20:37:42.009831+01:00","created_by":"kostya"}]}
